<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/extensibility.md at 2022-05-02

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>CONGA &#x2013; CONGA - Extensibility model</title>
    <link rel="stylesheet" href="./css/maven-base.css" />
    <link rel="stylesheet" href="./css/maven-theme.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
  </head>
  <body class="composite">
    <div id="banner">
<div id="bannerLeft">CONGA
</div>
<div id="bannerRight"><img src="https://devops.wcm.io/conga/images/conga.png" style="height:120px"/>
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2022-05-02</span>
           | <span id="projectVersion">Version: 1.14.7-SNAPSHOT</span>
      </div>
      <div class="xright">      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<section>
<h2><a name="CONGA_-_Extensibility_model"></a>CONGA - Extensibility model</h2>
<p>CONGA utilizes a flexible plugin-based architecture. A good part of the features shipped with CONGA itself is implemented using plugins bundles with it.</p>
<p>For the plugin architecture the Java ServiceLoader concept is used. See the Oracle tutorial <a class="externalLink" href="https://docs.oracle.com/javase/tutorial/ext/basics/spi.html">Creating Extensible Applications</a> for details.</p><section>
<h3><a name="CONGA_SPI"></a>CONGA SPI</h3>
<p>CONGA allows to provider custom plugins that are applied on generated files:</p>
<ul>

<li><b>File Header Plugin</b>: Plugin is used to add a CONGA file header to all generated files. The plugin controls at which position and with which comment syntax the headers are inserted. *)</li>
<li><b>Validator Plugin</b>: Plugin validates files after generation to ensure they are syntactically correct. *)</li>
<li><b>Handlebars Escaping Strategy Plugin</b>: Plugin allows to define escaping rules for special chars. *)</li>
<li><b>Post Processor Plugin</b>: Plugin that operations on a generated file, e.g. to convert it to a binary file.</li>
</ul>
<p>*) These plugins detect files with certain extensions, and are executed automatically on them.</p>
<p>Other plugins:</p>
<ul>

<li><b>Multiply Plugin</b>: Plugin controls the generation of multiple files from a single file definition.</li>
<li><b>Value Provider Plugin</b>: Allows to provide values form external sources, which can be referenced like variables</li>
<li><b>Value Encryption Plugin</b>: Encrypts a sensitive configuration parameter value e.g. for YAML model file export.</li>
<li><b>Node Model Export Plugin</b>: Allows to export &#x201c;model data&#x201d; (expanded configurations, list of generated files and tenants) from CONGA to a file which can be picked up by infrastructure automation tools.</li>
<li><b>URL File Plugin</b>: Allows to copy or download files from external sources identified via &#x201c;URL prefixes&#x201d;.</li>
<li><b>Handlebars Helper Plugin</b>: Plugin allows to register your own Handlebar helper to define custom handlebar expression usable in the CONGA templates.</li>
<li><b>YAML Represent Plugin</b>: Allows to customize the YAML file generation by adding custom represent implementations e.g. for encrypted values.</li>
<li><b>YAML Constructor Plugin</b>: Allows to customize the constructor for parsing YAML files.</li>
</ul>
<p>See API documentation for the detailed plugin interfaces:</p>
<ul>

<li><a href="generator/apidocs/io/wcm/devops/conga/generator/spi/package-summary.html">CONGA SPI</a></li>
<li><a href="generator/apidocs/io/wcm/devops/conga/generator/spi/handlebars/package-summary.html">CONGA SPI for Handlebars</a></li>
</ul></section><section>
<h3><a name="Built-in_plugins"></a>Built-in plugins</h3><section>
<h4><a name="File_plugins"></a>File plugins</h4>
<table border="0" class="bodyTable">
<thead>

<tr class="a">
<th>Plugin name</th>
<th>File name(s)</th>
<th align="center">File Header</th>
<th align="center">Validator</th>
<th align="center">Escaping</th>
<th align="center">Post Processor</th></tr>
</thead><tbody>

<tr class="b">
<td align="left"><code>json</code></td>
<td>.json</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"> </td></tr>
<tr class="a">
<td align="left"><code>xml</code></td>
<td>.xml</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"> </td></tr>
<tr class="b">
<td align="left"><code>conf</code></td>
<td>.conf</td>
<td align="center">X</td>
<td align="center"> </td>
<td align="center"> </td>
<td align="center"> </td></tr>
<tr class="a">
<td align="left"><code>unixShellScript</code></td>
<td>.sh</td>
<td align="center">X</td>
<td align="center"> </td>
<td align="center"> </td>
<td align="center"> </td></tr>
<tr class="b">
<td align="left"><code>windowsShellScript</code></td>
<td>.bat, .cmd</td>
<td align="center">X</td>
<td align="center"> </td>
<td align="center"> </td>
<td align="center"> </td></tr>
<tr class="a">
<td align="left"><code>none</code></td>
<td> </td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"> </td></tr>
</tbody>
</table>
<p>The <code>none</code> plugins allow to disable the default behavior based on the file extension.</p></section><section>
<h4><a name="Multiply_plugins"></a>Multiply plugins</h4>
<table border="0" class="bodyTable">
<thead>

<tr class="a">
<th>Plugin name</th>
<th>Description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left"><code>tenant</code></td>
<td>Allows to generate a file for each tenant defined in the environment.</td></tr>
<tr class="a">
<td align="left"><code>none</code></td>
<td>No multiply</td></tr>
</tbody>
</table></section><section>
<h4><a name="Value_Provider_plugins"></a>Value Provider plugins</h4>
<table border="0" class="bodyTable">
<thead>

<tr class="a">
<th>Plugin name</th>
<th>Description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left"><code>system</code></td>
<td>Allows to reference Java system properties in variable definitions, e.g. <code>${system::mysystemparam}</code></td></tr>
<tr class="a">
<td align="left"><code>maven</code></td>
<td>Allows to reference Maven properties in variable definitions, e.g. <code>${maven::my.maven.param}</code></td></tr>
</tbody>
</table></section><section>
<h4><a name="Export_plugins"></a>Export plugins</h4>
<table border="0" class="bodyTable">
<thead>

<tr class="a">
<th>Plugin name</th>
<th>Description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left"><code>yaml</code></td>
<td>Dumps all &#x201c;model data&#x201d; (expanded configuration, list of generated files and tenants) from CONGA to &#x201c;model.yaml&#x201d; files for each node. This file can be picked up by infrastructure automation tools e.g. Ansible to execute the further deployment steps.</td></tr>
<tr class="a">
<td align="left"><code>none</code></td>
<td>No export</td></tr>
</tbody>
</table></section><section>
<h4><a name="URL_File_plugins"></a>URL File plugins</h4>
<table border="0" class="bodyTable">
<thead>

<tr class="a">
<th>Plugin name</th>
<th>URL Prefix</th>
<th>Description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left"><code>filesystem</code></td>
<td><code>file:</code>, <code>file-node:</code></td>
<td>Copy files from local filesystem (relative to maven project root / node root directory)</td></tr>
<tr class="a">
<td align="left"><code>classpath</code></td>
<td><code>classpath:</code></td>
<td>Copy files from classpath</td></tr>
<tr class="b">
<td align="left"><code>http</code></td>
<td><code>http://</code>, <code>https://</code></td>
<td>Download files from HTTP or HTTPS URLs</td></tr>
<tr class="a">
<td align="left"><code>maven</code></td>
<td><code>mvn:</code></td>
<td>Download files from Maven Artifact repository (only supported when CONGA runs inside Maven)</td></tr>
</tbody>
</table></section><section>
<h4><a name="Other_plugins"></a>Other plugins</h4>
<p>Handlebars Helper plugins: see <a href="handlebars-quickstart.html">Handlebars quickstart</a>.</p>
<p>Further plugins are provided by separate wcm.io DevOps projects, see <a href="index.html">index page</a>.</p></section></section><section>
<h3><a name="Writing_your_own_CONGA_plugins"></a>Writing your own CONGA plugins</h3>
<p>To write your own plugin:</p>
<ol style="list-style-type: decimal">

<li>Create a new maven JAR file project</li>
<li>Create your plugin and let it implement one of the CONGA SPI Plugin interfaces</li>
<li>Create a ServiceLoader file at <code>META-INF/services/&lt;interface class name&gt;</code> and add your plugin class name</li>
<li>Add your JAR as plugin dependency to the CONGA maven plugin</li>
</ol></section></section>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2015&#x2013;2022<a href="https://devops.wcm.io">wcm.io DevOps</a>.
.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>