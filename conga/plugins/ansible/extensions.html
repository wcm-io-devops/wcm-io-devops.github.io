
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2022-12-05
 Rendered using Reflow Maven Skin 1.1.0 (https://github.com/wcm-io/wcm-io-tooling/tree/develop/maven/skins/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

  <head>
    <meta charset="UTF-8" />
    <title>CONGA - Extensions | CONGA Ansible Plugin</title>

    <link rel="shortcut icon" href="https://wcm.io/images/favicon.ico">
    <link rel="apple-touch-icon" href="https://wcm.io/images/favicon-152.png">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="wcm.io DevOps - Tools for Configuration Management and Deployment" />
    <meta http-equiv="content-language" content="en" />

    <link href="https://devops.wcm.io/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://devops.wcm.io/css/docs.css" rel="stylesheet" />
    <link href="https://devops.wcm.io/css/reflow-skin.css" rel="stylesheet" />
    <link href="https://devops.wcm.io/css/highlightjs-style-github.min.css" rel="stylesheet" />

    <link href="https://devops.wcm.io/css/lightbox.css" rel="stylesheet" />

    <link href="https://devops.wcm.io/css/site.css" rel="stylesheet" />
    <link href="https://devops.wcm.io/css/print.css" rel="stylesheet" media="print" />


  </head>

  <body class="page-extensions project-io.wcm.devops.conga.plugins.ansible.root" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../../..">wcm.io DevOps</a>
          <div class="nav-collapse collapse" id="top-nav-collapse">
            <ul class="nav pull-right">
              <li ><a href="http://github.com/wcm-io-devops" title="GitHub project" class="externalLink">GitHub project</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Categories <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li ><a href="../../" title="CONGA - CONfiguration GenerAtor">CONGA - CONfiguration GenerAtor</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li ><a href="https://wcm.io/contribute.html" title="Contribute" class="externalLink">Contribute</a></li>
                  <li ><a href="https://wcm-io.atlassian.net" title="Issues" class="externalLink">Issues</a></li>
                  <li ><a href="https://wcm-io.atlassian.net/wiki/" title="Wiki" class="externalLink">Wiki</a></li>
                  <li ><a href="https://wcm.io/mailing-lists.html" title="Mailing Lists" class="externalLink">Mailing Lists</a></li>
                  <li ><a href="http://github.com/wcm-io-devops" title="Fork on GitHub" class="externalLink">Fork on GitHub</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

  <div class="container">

  <!-- Masthead
  ================================================== -->

  <header>
  <div class="jumbotron subhead">
    <div class="row" id="banner">
      <div class="span12">
        <div class="pull-left">
          <a href="../../../" id="bannerLeft"><h1><img src="https://wcm.io/images/favicon-16@3x.png"/> wcm.io DevOps</h1></a>
          <p class="lead">Tools for Configuration Management and Deployment</p>
        </div>
        <div class="pull-right">
          <div id="bannerRight"><h1><img src="https://devops.wcm.io/conga/images/conga.png" style="height:120px"/></h1></div>
        </div>
      </div>
    </div>
  </div>
    <div>
      <ul class="breadcrumb">
        <li><a href="../../../" title="wcm.io DevOps">wcm.io DevOps</a></li>
        <li class="divider">/</li>
        <li><a href="index.html" title="CONGA Ansible Plugin">CONGA Ansible Plugin</a></li>
        <li class="divider">/</li>
        <li>CONGA - Extensions</li>
      </ul>
    </div>
  </header>

  <div class="main-body">
  <div class="row">
    <div class="span8">
      <div class="body-content">
<section> 
 <div class="page-header">
  <h2 id="CONGA_-_Extensions">CONGA - Extensions</h2>
 </div> 
 <p>The CONGA Ansible Plugin extends CONGA using its <a class="externalLink" href="https://devops.wcm.io/conga/extensibility.html">extensibility model</a>.</p> 
 <p>Ansible supports reading dynamic files (executable scripts) for inventories, password files etc. - the CONGA Ansible plugin supports the following files/scripts:</p> 
 <ul> 
  <li>Static files</li> 
  <li>Python scripts (<code>.py</code> extension)</li> 
 </ul> 
 <section> 
  <h3 id="Provided_Plugins">Provided Plugins</h3> 
  <section> 
   <h4 id="Value_Provider_Plugins">Value Provider Plugins</h4> 
   <table border="0" class="bodyTable table table-striped table-hover"> 
    <thead> 
     <tr class="a"> 
      <th>Plugin name</th> 
      <th>Description</th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td align="left"><code>ansible-vault</code></td> 
      <td>Allows to variables from encrypted <a class="externalLink" href="https://docs.ansible.com/ansible/latest/vault.html">Ansible Vault</a> files.</td> 
     </tr> 
     <tr class="a"> 
      <td align="left"><code>ansible-inventory</code></td> 
      <td>Allows to read <a class="externalLink" href="http://docs.ansible.com/ansible/latest/intro_inventory.html">Ansible Inventory</a> files.</td> 
     </tr> 
    </tbody> 
   </table> 
   <p>You can also define multiple value providers of the same plugin type. See <a class="externalLink" href="https://devops.wcm.io/conga/tooling/conga-maven-plugin/generate-mojo.html#valueProvider">value provider configuration</a> for details.</p> 
  </section> 
  <section> 
   <h4 id="URL_File_plugins">URL File plugins</h4> 
   <table border="0" class="bodyTable table table-striped table-hover"> 
    <thead> 
     <tr class="a"> 
      <th>Plugin name</th> 
      <th>Description</th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td align="left"><code>ansible-vault</code></td> 
      <td>Decrypts a file encrypted with [Ansible Vault][ansible-vault. Can be combined with other URL file plugins.</td> 
     </tr> 
    </tbody> 
   </table> 
  </section> 
  <section> 
   <h4 id="Value_Encryption_plugins">Value Encryption plugins</h4> 
   <table border="0" class="bodyTable table table-striped table-hover"> 
    <thead> 
     <tr class="a"> 
      <th>Plugin name</th> 
      <th>Description</th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td align="left"><code>ansible-vault</code></td> 
      <td>Encrypts a single configuration parameter value with Ansible vault, to be stored as !vault tagged encrypted value in YAML file.</td> 
     </tr> 
    </tbody> 
   </table> 
  </section> 
  <section> 
   <h4 id="YAML_Represent_plugins">YAML Represent plugins</h4> 
   <table border="0" class="bodyTable table table-striped table-hover"> 
    <thead> 
     <tr class="a"> 
      <th>Plugin name</th> 
      <th>Description</th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td align="left"><code>ansible-vault</code></td> 
      <td>Registers a custom represent implementations that controls the rendering of !vault tagged encrypted values in the node model export YAML file.</td> 
     </tr> 
    </tbody> 
   </table> 
  </section> 
 </section> 
 <section> 
  <h3 id="Ansible_Vault">Ansible Vault</h3> 
  <p><i><b>Please note:</b> You need to install the <a class="externalLink" href="http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html">Java Cryptography Extension (JCE) Unlimited Strength policy files</a> from Oracle, because Ansible uses 256 bit keys to handle encryption and decryption of the vault files. If you are using Java 8u162 or higher they are already active by default.</i></p> 
  <p>Ansible Vault files are files encrypted with <a class="externalLink" href="https://docs.ansible.com/ansible/latest/vault.html">Ansible Vault</a>. Ansible Vault requires a vault password to be set in the environment to decrypt the files. You can set the vault password by either:</p> 
  <ul> 
   <li>Setting the password via the system property:<br> <code>-Dansible.vault.password=mypassword</code></li> 
   <li>Setting the password via the system property pointing to a password file:<br> <code>-Dansible.vault.password.file=/path/to/password-file</code></li> 
   <li>Setting the system environment variable <code>ANSIBLE_VAULT_PASSWORD</code>.</li> 
   <li>Setting the system environment variable <code>ANSIBLE_VAULT_PASSWORD_FILE</code> pointing to the vault password file. This variable is used by Ansible itself as well.</li> 
  </ul> 
  <section> 
   <h4 id="Reading_variables_from_Ansible_Vault_files">Reading variables from Ansible Vault files</h4> 
   <p>If you have an Ansible Vault-encrypted file containing password or other parameters in YAML format, you can use the Ansible Vault value provider plugin to read them in CONGA.</p> 
   <p>Example YAML file <i>before encryption</i>:</p> 
   <div class="source"> 
    <pre><code class="language-yaml">pwd1: abc
</code></pre> 
   </div> 
   <p>Using the value provider plugin for Ansible Vault you can the variables defined in the encrypted file.</p> 
   <p>Example:</p> 
   <ul> 
    <li><code>${ansible-vault::pwd1}</code> = abc</li> 
   </ul> 
   <p>Via configuration you need to tell the <a class="externalLink" href="https://devops.wcm.io/conga/tooling/conga-maven-plugin/plugin-info.html">CONGA Maven Plugin</a> (via the pom.xml or via system property) where to look up the file containing the encrypted variables, and the password to decrypt the data.</p> 
   <p>Example:</p> 
   <div class="source"> 
    <pre><code class="language-xml">&lt;plugin&gt;
  &lt;groupId&gt;io.wcm.devops.conga&lt;/groupId&gt;
  &lt;artifactId&gt;conga-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;valueProvider&gt;
      ansible-vault;file=${project.basedir}/vault/myvars
    &lt;/valueProvider&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre> 
   </div> 
  </section> 
  <section> 
   <h4 id="Reading_and_decrypting_Ansible_Vault-encrypted_files">Reading and decrypting Ansible Vault-encrypted files</h4> 
   <p>The URL File plugin for Ansible Vault allows to access (and decrypt) Ansible Vault-encrpyted files anywhere in CONGA where a URL path to a file can be given - e.g. in file definitions for roles. This can be combined with other URL file plugins, e.g. getting an encrypted file from classpath, HTTP URL or other sources and then decrypting it.</p> 
   <p>Example:</p> 
   <div class="source"> 
    <pre><code class="language-yaml"># Copy file from classpath and decrypt it
- file: mysample.txt
  url: ansible-vault:classpath:/sample.txt
</code></pre> 
   </div> 
  </section> 
 </section> 
 <section> 
  <h3 id="Ansible_Inventory">Ansible Inventory</h3> 
  <section> 
   <h4 id="Reading_Ansible_Inventory_files">Reading Ansible Inventory files</h4> 
   <p>Ansible Inventory files are expected in a special format as used by the Ansible roles for AEM deployment with CONGA.</p> 
   <p>Example inventory:</p> 
   <div class="source"> 
    <pre><code>[aem-author]
host-01

[aem-publish]
host-02
host-03
</code></pre> 
   </div> 
   <p>Using the value provider plugin for Ansible Inventory you can reference the list of host names for each group.</p> 
   <p>Example:</p> 
   <ul> 
    <li><code>${ansible-inventory::aem-author}</code> = host-01</li> 
    <li><code>${ansible-inventory::aem-publish}</code> = host-02,host-03</li> 
   </ul> 
   <p>Via configuration you need to tell the <a class="externalLink" href="https://devops.wcm.io/conga/tooling/conga-maven-plugin/plugin-info.html">CONGA Maven Plugin</a> (via the pom.xml or via system environment property) where to look up the Ansible Inventory file.</p> 
   <p>Example:</p> 
   <div class="source"> 
    <pre><code class="language-xml">&lt;plugin&gt;
  &lt;groupId&gt;io.wcm.devops.conga&lt;/groupId&gt;
  &lt;artifactId&gt;conga-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;valueProvider&gt;
      ansible-inventory;file=${project.basedir}/inventory/inventory-example
    &lt;/valueProvider&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre> 
   </div> 
   <p>The implementation supports both the “INI-style” inventory format as shown above, as well as JSON-style inventories as <a class="externalLink" href="http://docs.ansible.com/ansible/latest/dev_guide/developing_inventory.html">documented here</a>.</p> 
   <p>If JSON-style inventories are used it's also possible to use a <a class="externalLink" href="https://github.com/json-path/JsonPath">JsonPath</a> expression for fetching data from the inventory. This example returns an array of matching values in the JSON data:</p> 
   <div class="source"> 
    <pre><code>${ansible-inventory::$._meta.hostvars..[?(@.ec2_tag_Name == 'tag2')].ec2_private_ip_address}
</code></pre> 
   </div> 
  </section> 
 </section> 
</section>
      </div>
    </div>
    <div class="span4">
      <div id="toc-sidebar">
        <div class="well">
          <ul class="nav nav-list">
            <li class="nav-header">Table of Contents</li>
    <li class="dropdown"><a href="#CONGA_-_Extensions" title="CONGA - Extensions">CONGA - Extensions <b class="caret"></b></a>
      <ul class="nav nav-list">
    <li class="dropdown"><a href="#Provided_Plugins" title="Provided Plugins">Provided Plugins <b class="caret"></b></a>
      <ul class="nav nav-list">
    <li><a href="#Value_Provider_Plugins" title="Value Provider Plugins">Value Provider Plugins</a>
    <li><a href="#URL_File_plugins" title="URL File plugins">URL File plugins</a>
    <li><a href="#Value_Encryption_plugins" title="Value Encryption plugins">Value Encryption plugins</a>
    <li><a href="#YAML_Represent_plugins" title="YAML Represent plugins">YAML Represent plugins</a>
        <li class="divider"></li>
      </ul>
    </li>
    <li class="dropdown"><a href="#Ansible_Vault" title="Ansible Vault">Ansible Vault <b class="caret"></b></a>
      <ul class="nav nav-list">
    <li><a href="#Reading_variables_from_Ansible_Vault_files" title="Reading variables from Ansible Vault files">Reading variables from Ansible Vault files</a>
    <li><a href="#Reading_and_decrypting_Ansible_Vault-encrypted_files" title="Reading and decrypting Ansible Vault-encrypted files">Reading and decrypting Ansible Vault-encrypted files</a>
        <li class="divider"></li>
      </ul>
    </li>
    <li class="dropdown"><a href="#Ansible_Inventory" title="Ansible Inventory">Ansible Inventory <b class="caret"></b></a>
      <ul class="nav nav-list">
    <li><a href="#Reading_Ansible_Inventory_files" title="Reading Ansible Inventory files">Reading Ansible Inventory files</a>
        <li class="divider"></li>
      </ul>
    </li>
      </ul>
    </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  </div>

  </div>

  <!-- Footer
  ================================================== -->
  <footer class="well">
    <div class="container">
      <div class="row">
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Main</li>
            <li >
              <a href="../../../" title="Home">Home</a>
            </li>
            <li >
              <a href="../../../platforms.html" title="Platforms">Platforms</a>
            </li>
            <li >
              <a href="../../../maven.html" title="Maven Repositories">Maven Repositories</a>
            </li>
            <li >
              <a href="http://github.com/wcm-io-devops" title="GitHub project" class="externalLink">GitHub project</a>
            </li>
            <li >
              <a href="https://wcm.io/subprojects.html" title="Subprojects" class="externalLink">Subprojects</a>
            </li>
            <li >
              <a href="http://www.apache.org/licenses/LICENSE-2.0.txt" title="License" class="externalLink">License</a>
            </li>
            <li >
              <a href="https://wcm.io/commercial-support.html" title="Commercial Support" class="externalLink">Commercial Support</a>
            </li>
            <li >
              <a href="https://diva-e.com/en/imprint/" title="Imprint" class="externalLink">Imprint</a>
            </li>
            <li >
              <a href="https://wcm.io/privacy.html" title="Privacy Policy" class="externalLink">Privacy Policy</a>
            </li>
          </ul>
        </div>
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Categories</li>
            <li >
              <a href="../../" title="CONGA - CONfiguration GenerAtor">CONGA - CONfiguration GenerAtor</a>
            </li>
          </ul>
        </div>
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Contribute</li>
            <li >
              <a href="https://wcm.io/contribute.html" title="Contribute" class="externalLink">Contribute</a>
            </li>
            <li >
              <a href="https://wcm-io.atlassian.net" title="Issues" class="externalLink">Issues</a>
            </li>
            <li >
              <a href="https://wcm-io.atlassian.net/wiki/" title="Wiki" class="externalLink">Wiki</a>
            </li>
            <li >
              <a href="https://wcm.io/mailing-lists.html" title="Mailing Lists" class="externalLink">Mailing Lists</a>
            </li>
            <li >
              <a href="http://github.com/wcm-io-devops" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
            </li>
          </ul>
        </div>
        <div class="span3 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Maven documentation</li>
            <li >
              <a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
            </li>
            <li >
              <a href="project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
            </li>
          </ul>
        </div>
        <div class="span3 bottom-description">
          <blockquote>wcm.io DevOps is an Open Source project which provides tools for configuration management and deployment.</blockquote>
        </div>
      </div>
    </div>
  </footer>

  <div class="container subfooter">
    <div class="row">
      <div class="span12">
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p class="copyright">Copyright &copy;2015-2022 <a href="https://devops.wcm.io">wcm.io DevOps</a>. All Rights Reserved.</p>
        <p class="version-date"><span class="projectVersion">Version: 1.4.1-SNAPSHOT. </span><span class="publishDate">Last Published: 2022-12-05. </span></p>
      </div>
    </div>
  </div>

  <!-- JavaScript
  ================================================== -->
  <script src="https://devops.wcm.io/js/jquery.min.js"></script>
  <script src="https://devops.wcm.io/js/bootstrap.min.js"></script>
  <script src="https://devops.wcm.io/js/lightbox.min.js"></script>
  <script src="https://devops.wcm.io/js/reflow-scroll.js"></script>
  <script src="https://devops.wcm.io/js/highlight.min.js"></script>


  <script src="https://devops.wcm.io/js/reflow-skin.js"></script>

  </body>
</html>