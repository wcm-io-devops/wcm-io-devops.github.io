<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/general-concepts.md at 2022-05-03

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>CONGA &#x2013; CONGA - General concepts</title>
    <link rel="stylesheet" href="./css/maven-base.css" />
    <link rel="stylesheet" href="./css/maven-theme.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
  </head>
  <body class="composite">
    <div id="banner">
<div id="bannerLeft">CONGA
</div>
<div id="bannerRight"><img src="https://devops.wcm.io/conga/images/conga.png" style="height:120px"/>
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2022-05-03</span>
           | <span id="projectVersion">Version: 1.14.7-SNAPSHOT</span>
      </div>
      <div class="xright">      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<section>
<h2><a name="CONGA_-_General_concepts"></a>CONGA - General concepts</h2><section>
<h3><a name="Targets_System_Configuration"></a>Targets System Configuration</h3>
<p>The configuration generator focuses on <b>system configuration</b> that is usually defined at deployment time and is static at runtime. It is not targeted to &#x201c;runtime configuration&#x201d; like site configuration, tenant configuration that can be changed at any time by authorized users.</p>
<p>This tool is <b>not a deployment automation tool</b>. It focuses only on configuration generation and can be integrated in a manual or automated deployment process.</p></section><section>
<h3><a name="Supported_Systems"></a>Supported Systems</h3>
<p>The Tool is <b>not limited to a specific type of application</b> or runtime environment, any system that relies on system configuration stored somewhere can be provisioned with this tool</p>
<p>Typical target systems we had in mind when designing the tool are: AEM, AEM Dispatcher, Apache Tomcat and Apache HTTPd.</p>
<p>The tool <b>only generates files</b>. Further distribution of these files (e.g. copy to server, deploy via HTTP etc.) is not part of the tool.</p>
<p>It is possible to apply this tool only to <b>parts of a systems configuration</b>, e.g. generate only the virtual host definitions of a webserver and maintain the other part of the configuration in other ways</p></section><section>
<h3><a name="Files_that_can_be_generated"></a>Files that can be generated</h3>
<p>Examples:</p>
<ul>

<li>Plain text files e.g. Properties, Scripts, Dispatcher, HTTPd config</li>
<li>JSON files</li>
<li>XML files</li>
<li>OSGi configuration snippets</li>
<li>Sling Provisioning Model</li>
<li>AEM Content Package containing OSGi configurations</li>
</ul>
<p>Basically all text-based files types can be generated. And with post processor plugins even binary files.</p>
<p>Additionally it is possible to copy/download files from external sources and include them in the configuration process. External sources are e.g. local filesystem, classpath, HTTP/HTTPS URLs or Maven Artifact references.</p></section><section>
<h3><a name="Configuration_meta_model"></a>Configuration meta model</h3>
<p><img src="images/configuration-meta-model.png" alt="Configuration meta model" /></p><section>
<h4><a name="Environments"></a>Environments</h4>
<ul>

<li><b>Environment</b>: Environment for a specific project or group of projects with a selection of nodes that work together, e.g. &#x201c;QS&#x201d;, &#x201c;Prelive&#x201d;, &#x201c;Prod&#x201d; etc.</li>
<li><b>Node</b>: A system to deploy to, e.g. a physical machine, virtual machine, Docker container or any other deployment target.
<ul>

<li>For each node multiple roles can be assigned</li>
<li>For each role one or multiple variants</li>
</ul>
</li>
<li><b>Tenant</b>: List of tenants in the environment and their configuration
<ul>

<li>For each tenant multiple tenant roles can be assigned</li>
</ul>
</li>
<li><b>Configuration value</b>: Configuration value for a configuration parameter in context of environments, nodes, roles and tenants.</li>
</ul></section><section>
<h4><a name="Configuration_definitions"></a>Configuration definitions</h4>
<ul>

<li><b>Node role</b>: A set of functionality/application part that can be deployed to a node/machine, e.g. &#x201c;AEM CMS&#x201d;, &#x201c;AEM Dispatcher&#x201d;, &#x201c;Tomcat Service Layer&#x201d;
<ul>

<li><b>Variant</b>: Variants of a role with same deployment artifacts but different configuration; e.g. &#x201c;Author&#x201d;, &#x201c;Publish&#x201d;, &#x201c;Importer&#x201d;.</li>
<li><b>Configuration parameter</b>: Definition of configuration parameters that can be set for each environment. The configuration parameter values are merged with the file templates when generating the configuration.</li>
<li><b>File</b>: Defines file to be generated for Role/Variant based on a File Template</li>
</ul>
</li>
<li><b>Tenant role</b>: Allows to define features required for a tenant, e.g. Tenant Website with or without special features</li>
<li><b>File template</b>: Script-based template the contains static configuration parts and placeholders for the configuration parameter values</li>
</ul></section><section>
<h4><a name="Multitenancy"></a>Multitenancy</h4>
<ul>

<li>Often a single infrastructure environment is used to host applications and websites for multiple tenants (e.g. for multiple markets or different brands)</li>
<li>Most of this multi-tenancy aspects are managed outside the system configuration (e.g. in content hierarchy and content pages, context-aware configuration in repository)</li>
<li>But in some occasions the system configuration is affected as well, e.g.
<ul>

<li>One vhost file for each tenant's website in the webserver configuration</li>
<li>Short URL Mapping in Dispatcher and AEM for each website</li>
</ul>
</li>
<li>To support this tenants may be defined in each environment, and it is possible to override some of the configuration parameters with tenant-specific values</li>
<li>Using the &#x201c;Tenant Multiply&#x201d; plugin it is possible to generate multiple configuration files (one per tenant) based on a single file template.</li>
<li>Tenants are independent from roles and role variants from the configuration definition. Tenant roles are specific to tenants and allow to express different characteristics of tenants e.g. with or without a specific feature-set.</li>
</ul></section></section><section>
<h3><a name="Exporting_model_data"></a>Exporting model data</h3>
<p>By default CONGA exports &#x201c;model data&#x201d; for each node to a file &#x201c;model.yaml&#x201d;. This file includes expanded configuration, list of generated files and tenants from the current CONGA run. This information can be picked by infrastructure automation tools like Ansible for executing the further development steps.</p>
<p>Within the CONGA Maven plugin configuration you can disable this export or switch to different plugins if you need the model data in different formats.</p></section><section>
<h3><a name="Technology_stack"></a>Technology stack</h3>
<ul>

<li>Implemented in Java 8</li>
<li>Definition and Configuration Files in <a class="externalLink" href="http://yaml.org/">YAML 1.1</a></li>
<li>Template script language: <a class="externalLink" href="https://github.com/jknack/handlebars.java">Handlebars for Java</a></li>
<li>Runnable from <a class="externalLink" href="http://maven.apache.org/">Apache Maven</a> (recommended) or standalone</li>
</ul></section></section>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2015&#x2013;2022<a href="https://devops.wcm.io">wcm.io DevOps</a>.
.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>